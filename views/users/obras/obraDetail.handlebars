{{#each erros}}
    <div class="alert alert-danger">{{texto}}</div>
{{else}}

{{/each}}

{{#each mensagem}}
    <div class="alert alert-success">{{texto}}</div>
{{else}}

{{/each}}

<h2>Obra</h2>
<hr>


 {{#each obra}}
    {{#if nome}}
        <div class="row mt-5 col-12 text-center">
            <div class="col-6">
                <h6 class="blockquote">Nome</h6>
            </div>
            <div class="col-6">
                <h6 class="blockquote">Estado</h6>
            </div>
            
        </div>

        <div class="row col-12 text-center">
            <div class="col-6">
                <label for="nome" id="nomeObra">{{nome}}</label>
            </div>

            
            <div class="col-6">
                <label for="estado" id="estado">{{estadoToString estado}}</label>
            </div>
        </div>


        <div class="row mt-5 col-12 text-center">
            <div class="col-6">
                <h6 class="blockquote">Orçamento</h6>
            </div>
            <div class="col-6">
                <h6 class="blockquote">Custo final</h6>
            </div>
            
        </div>

        <div class="row col-12 text-center">
            <div class="col-6">
                <label for="nome" id="nomeObra">{{precoToString orcamento}}</label>
            </div>

            
            <div class="col-6">
                <label for="estado" id="estado">{{precoToString custoFinal}}</label>
            </div>
        </div>

        <div class="row col-12 text-center">
            <div class="col-12">
                <h6 class="blockquote">Descrição</h6>
            </div>
        </div>

        <div class="row col-12 text-center">
            <div class="col-12">
                <label for="descricao" id="descricao">{{descricao}}</label>
            </div>
        </div>


        <div class="row mt-5 col-12 text-center">
            
            <div class="col-6">
                <h6 class="blockquote">Data prevista de inicio</h6>
            </div>

            <div class="col-6 text-center">
                <h6 class="blockquote">Data prevista de fim</h6>
            </div>
        </div>


        <div class="row col-12 text-center">
            <div class="col-6">
                {{dateToString dataPrevistaInicio}}
            </div>

            <div class="col-6">
                {{dateToString dataPrevistaFim}}
            </div>
        </div>

        <div class="row mt-5 col-12 text-center">
            <div class="col-6">
                <h6 class="blockquote">Data de início</h6>
            </div>
            
            <div class="col-6 text-center">
                <h6 class="blockquote">Data de fim</h6>
            </div>
        </div>


        <div class="row col-12 text-center">
            <div class="col-6">
                {{dateToString dataInicio}}
            </div>

            <div class="col-6">
                {{dateToString dataFim}}
            </div>
        </div>

        <div class="row mt-5 text-center">
            <div class="col-12">
                <h6 class="blockquote">Tarefas</h6>
            </div>
        </div>

        {{#if tarefas}}
            <div class="row mt-4">
                <div class="col-2 font-weight-bold">Nome</div>
                <div class="col-3 font-weight-bold">Data prevista de inicio</div>
                <div class="col-3 font-weight-bold">Data prevista de fim</div>
                <div class="col-2 font-weight-bold">Data de inicio</div>
                <div class="col-2 font-weight-bold">Data de fim</div>
            </div>
            <hr class="style16">
            {{else}}
            <div class="row text-center mt-4">
                <div class="col-12 font-weight-bold">Sem tarefas associadas à obra</div>
            </div>
        {{/if}}
        
    {{/if}}
 {{/each}}
 
{{#each tarefas}}
<div class="row mt-4" style="cursor: pointer;" data-name="{{nome}}" onclick="saltaParaTarefa(this)">
    <div class="col-2">{{nome}}</div>
    <div class="col-3">{{dateToString dataPrevistaInicio}}</div>
    <div class="col-3">{{dateToString dataPrevistaFim}}</div>
    <div class="col-2">{{dateToString dataInicio}}</div>
    <div class="col-2">{{dateToString dataFim}}</div>
</div>    
<hr class="style16">
{{else}}
{{/each}}

<div class="row text-right">
    <div class="mt-5 mb-5 col-12">
        <button class="btn btn-dark" >Editar</button>
        <button class="btn btn-dark" onclick="saltaParaAddTarefa()">Adicionar tarefa</button>
        <button class="btn btn-dark" onclick="saltaParaObras()">Voltar</button>
    </div>
</div>
   
   <script>
        function saltaParaObras() {
            window.location.href = "/obras";
        }

        function saltaParaAddTarefa(){
            obra = document.getElementById('nomeObra').textContent;
            console.log(obra);
            window.location.href = "/obras/"+obra+"/addTarefa";
        }

        function saltaParaTarefa(handle) {
            window.location.href = "/tarefa/"+handle.dataset.name;
        }

        window.onload = function(){
            obra = document.getElementById('nomeObra').textContent
            history.replaceState({}, null, '/obra/'+obra)
        }
   </script>
